{"remainingRequest":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/src/components/resources/GestionEmployes.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/src/components/resources/GestionEmployes.vue","mtime":1575053716000},{"path":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/cprosemere/Dropbox/Bacc_math_info/INM5001-A19/calendrier/INM5001---Atelier/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBEYXRlcGlja2VyIGZyb20gJ3Z1ZWpzLWRhdGVwaWNrZXInCmV4cG9ydCBkZWZhdWx0IHsKICAgIG5hbWU6ICdnZXN0aW9uRW1wbG95ZXMnLAogICAgY29tcG9uZW50czogewogICAgICAgIERhdGVwaWNrZXIKICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBlbXBsb3llczogbnVsbCwKICAgICAgICAgICAgYWZmaWNoZXJFbXBsb3llczogZmFsc2UsCiAgICAgICAgICAgIGZvcm1EYXRhQ29uZ2VkaWVtZW50OiBudWxsLAogICAgICAgICAgICBpZGVtcGxveWU6IG51bGwsCiAgICAgICAgICAgIG5vbWVtcGxveWU6IG51bGwsCiAgICAgICAgICAgIHByZW5vbWVtcGxveWU6IG51bGwsCiAgICAgICAgICAgIG5icnF1YXJ0c21heDogbnVsbCwKICAgICAgICAgICAgZGF0ZWVtYmF1Y2hlOiBudWxsLAogICAgICAgICAgICBtb3RkZXBhc3NlOiBudWxsLAogICAgICAgICAgICBmb3JtRGF0YUFqb3V0ZXJEaXNwb25pYmlsaXRlczogewogICAgICAgICAgICAgICAgY2hlY2tlZDogW10KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0sCiAgICBtb3VudGVkOiBmdW5jdGlvbigpIHt9LAogICAgbWV0aG9kczogewogICAgICAgIHRvZ2dsZUFmZmljaGVyRW1wbG95ZXMoKSB7CiAgICAgICAgICAgICAgICBmZXRjaCgnL0VtcGxveWUnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmVtcGxveWVzID0gZGF0YQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyh0aGlzLmVtcGxveWVzKTsKICAgICAgICAgICAgICAgICAgICB9KS5jYXRjaChlcnJvciA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycm9yKTsKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHRoaXMuYWZmaWNoZXJFbXBsb3llcyA9ICF0aGlzLmFmZmljaGVyRW1wbG95ZXMKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29uZ2VkaWVyRW1wbG95ZSgpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25SZXF1ZXN0ID0ge30KICAgICAgICAgICAgICAgIGpzb25SZXF1ZXN0LmlkZW1wbG95ZSA9IHRoaXMuZm9ybURhdGFDb25nZWRpZW1lbnQudG9VcHBlckNhc2UoKTsKICAgICAgICAgICAgICAgIGZldGNoKCcvRW1wbG95ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnREVMRVRFJywKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0FjY2VwdCc6ICdhcHBsaWNhdGlvbi9qc29uJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoanNvblJlcXVlc3QpCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9zdWNjZXNzIikKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWpvdXRlckVtcGxveWUoKSB7CiAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IHRoaXMuZGF0ZWVtYmF1Y2hlOwogICAgICAgICAgICAgICAgdmFyIGRhdGVBanVzdGVlID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgICAgICAgICAgICBkYXRlQWp1c3RlZS5zZXRNaW51dGVzKGRhdGVBanVzdGVlLmdldE1pbnV0ZXMoKSArIGRhdGVBanVzdGVlLmdldFRpbWV6b25lT2Zmc2V0KCkpOyAvL1Blcm1ldCBkJ2F2b2lyIGxhIGJvbm5lIGRhdGUgc2FucyBpbmZsdWVuY2UgZHUgZnVzZWF1IGhvcmFpcmUKICAgICAgICAgICAgICAgIGNvbnN0IGpzb25FbXAgPSB7fTsKICAgICAgICAgICAgICAgIGpzb25FbXAubm9tZW1wbG95ZSA9IHRoaXMubm9tZW1wbG95ZTsKICAgICAgICAgICAgICAgIGpzb25FbXAucHJlbm9tZW1wbG95ZSA9IHRoaXMucHJlbm9tZW1wbG95ZTsKICAgICAgICAgICAgICAgIGpzb25FbXAubmJycXVhcnRzbWF4ID0gdGhpcy5uYnJxdWFydHNtYXg7CiAgICAgICAgICAgICAgICBqc29uRW1wLmRhdGVlbWJhdWNoZSA9IGRhdGVBanVzdGVlOwogICAgICAgICAgICAgICAganNvbkVtcC5tb3RkZXBhc3NlID0gdGhpcy5tb3RkZXBhc3NlOwogICAgICAgICAgICAgICAganNvbkVtcC5kaXNwbyA9IHRoaXMuZm9ybURhdGFBam91dGVyRGlzcG9uaWJpbGl0ZXMuY2hlY2tlZDsKICAgICAgICAgICAgICAgIGZldGNoKCcvRW1wbG95ZScsIHsKICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdBY2NlcHQnOiAnYXBwbGljYXRpb24vanNvbicsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KGpzb25FbXApCiAgICAgICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyb3IgPT4gewogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy4kcm91dGVyLnB1c2goIi9zdWNjZXNzIikKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbW9kaWZpZXJFbXBsb3llKHJlY29yZCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgIGFsZXJ0KHJlY29yZCArICI7ICIgKyBpbmRleCkKICAgICAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["GestionEmployes.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GestionEmployes.vue","sourceRoot":"src/components/resources","sourcesContent":["<template>\n    <div class=\"w3-main\" style=\"margin-left:250px\">\n        <div class=\"w3-row w3-padding-64\">\n            <div class=\"w3-twothird w3-container\">\n                <br/>\n                <br/>\n                <h1 class=\"w3-text-teal\">Rechercher des employés</h1>\n\n                <button @click=\"toggleAfficherEmployes\" class=\"btn btn-primary\">Afficher tous les employés</button>\n                <p v-if=\"afficherEmployes\">Veuillez cliquer sur un employé pour le modifier</p>\n                <b-table striped hover :items=\"employes\" v-if=\"afficherEmployes\" @row-clicked=\"modifierEmploye\" selectable>\n                </b-table>\n\n                <h1 class=\"w3-text-teal\">Ajouter un employé</h1>\n                <b-form @submit.prevent=\"ajouterEmploye\">\n                    <b-form-group id=\"nomemploye\" label=\"Nom:\" label-for=\"nom\">\n                        <b-form-input id=\"nomemploye\" v-model=\"nomemploye\" required pattern=\"[a-zA-Z]{4,20}\" placeholder=\"Nom (entre 4 et 20 caractères)\" />\n                    </b-form-group>\n\n                    <b-form-group id=\"prenomemploye\" label=\"Prénom:\" label-for=\"prenom\">\n                        <b-form-input id=\"prenomemploye\" v-model=\"prenomemploye\" required pattern=\"[a-zA-Z]{4,20}\" placeholder=\"Prenom (entre 4 et 20 caractères)\" />\n                    </b-form-group>\n\n                    <b-form-group id=\"nbrquartsmax\" label=\"Nombre de quarts de travail maximum par semaine:\" label-for=\"quarts\">\n                        <b-form-input id=\"nbrquartsmax\" v-model=\"nbrquartsmax\" required pattern='[0-9]{1,2}' placeholder=\"Un nombre entre 1 et 15\" />\n                    </b-form-group>\n\n                    <b-form-group id=\"dateembauche\" label=\"Date d'embauche:\">\n                        <datepicker v-model=\"dateembauche\" name=\"dateembauche\"></datepicker>\n                    </b-form-group>\n\n                    <b-form-group id=\"motdepasse\" label=\"Veuillez créer un mot de passe:\" label-for=\"motdepasse\">\n                        <b-form-input id=\"motdepasse\" v-model=\"motdepasse\" required pattern='[a-zA-Z0-9]{1,6}' placeholder=\"alphanumérique (entre 1 et 6 caractères)\" />\n                    </b-form-group>\n\n                    <b-form-group id=\"dispo\" label=\"Veuillez cocher les disponibilités de l'employé:\">\n                        <b-form-checkbox-group v-model=\"formDataAjouterDisponibilites.checked\" id=\"dispo\">\n                            Lundi:\n                            <br/>\n                            <b-form-checkbox value=\"J1\">Jour</b-form-checkbox>\n                            <b-form-checkbox value=\"S1\">Soir</b-form-checkbox>\n                            <b-form-checkbox value=\"N1\">Nuit</b-form-checkbox>\n                            <br/>Mardi:\n                            <br/>\n                            <b-form-checkbox value=\"J2\">Jour</b-form-checkbox>\n                            <b-form-checkbox value=\"S2\">Soir</b-form-checkbox>\n                            <b-form-checkbox value=\"N2\">Nuit</b-form-checkbox>\n                            <br/>Mercredi:\n                            <br/>\n                            <b-form-checkbox value=\"J3\">Jour</b-form-checkbox>\n                            <b-form-checkbox value=\"S3\">Soir</b-form-checkbox>\n                            <b-form-checkbox value=\"32\">Nuit</b-form-checkbox>\n                            <br/>Jeudi:\n                            <br/>\n                            <b-form-checkbox value=\"J4\">Jour</b-form-checkbox>\n                            <b-form-checkbox value=\"S4\">Soir</b-form-checkbox>\n                            <b-form-checkbox value=\"N4\">Nuit</b-form-checkbox>\n                            <br/>Vendredi:\n                            <br/>\n                            <b-form-checkbox value=\"J5\">Jour</b-form-checkbox>\n                            <b-form-checkbox value=\"S5\">Soir</b-form-checkbox>\n                            <b-form-checkbox value=\"N5\">Nuit</b-form-checkbox>\n                        </b-form-checkbox-group>\n                    </b-form-group>\n\n                    <b-button type=\"submit\" variant=\"primary\">Ajouter</b-button>\n                </b-form>\n\n                <h1 class=\"w3-text-teal\">Congédier un employé</h1>\n                <b-form @submit.prevent=\"congedierEmploye\">\n                    <b-form-group id=\"congedierEmploye\" label=\"Identifiant de l'employé à congédier:\" label-for=\"congedier\">\n                        <b-form-input id=\"identifiant\" v-model=\"formDataCongediement\" required placeholder=\"Identifiant à 5 lettres\" />\n                    </b-form-group>\n                    <b-button type=\"submit\" variant=\"primary\">Congédier</b-button>\n                </b-form>\n\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n    import Datepicker from 'vuejs-datepicker'\n    export default {\n        name: 'gestionEmployes',\n        components: {\n            Datepicker\n        },\n        data: function() {\n            return {\n                employes: null,\n                afficherEmployes: false,\n                formDataCongediement: null,\n                idemploye: null,\n                nomemploye: null,\n                prenomemploye: null,\n                nbrquartsmax: null,\n                dateembauche: null,\n                motdepasse: null,\n                formDataAjouterDisponibilites: {\n                    checked: []\n                }\n            }\n        },\n        mounted: function() {},\n        methods: {\n            toggleAfficherEmployes() {\n                    fetch('/Employe', {\n                            method: 'GET'\n                        })\n                        .then((response) => {\n                            return response.json()\n                        })\n                        .then((data) => {\n                            this.employes = data\n                                //console.log(this.employes);\n                        }).catch(error => {\n                            console.log(error);\n                        });\n                    this.afficherEmployes = !this.afficherEmployes\n                },\n                congedierEmploye() {\n                    const jsonRequest = {}\n                    jsonRequest.idemploye = this.formDataCongediement.toUpperCase();\n                    fetch('/Employe', {\n                            method: 'DELETE',\n                            headers: {\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(jsonRequest)\n                        })\n                        .then((response) => {\n                            return response.json()\n                        })\n                        .then((data) => {\n                            console.log(data);\n                        }).catch(error => {\n                            console.log(error);\n                        });\n                        this.$router.push(\"/success\")\n                },\n                ajouterEmploye() {\n                    var date = this.dateembauche;\n                    var dateAjustee = new Date(date);\n                    dateAjustee.setMinutes(dateAjustee.getMinutes() + dateAjustee.getTimezoneOffset()); //Permet d'avoir la bonne date sans influence du fuseau horaire\n                    const jsonEmp = {};\n                    jsonEmp.nomemploye = this.nomemploye;\n                    jsonEmp.prenomemploye = this.prenomemploye;\n                    jsonEmp.nbrquartsmax = this.nbrquartsmax;\n                    jsonEmp.dateembauche = dateAjustee;\n                    jsonEmp.motdepasse = this.motdepasse;\n                    jsonEmp.dispo = this.formDataAjouterDisponibilites.checked;\n                    fetch('/Employe', {\n                            method: 'POST',\n                            headers: {\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(jsonEmp)\n                        })\n                        .then((response) => {\n                            return response.json()\n                        })\n                        .then((data) => {\n                            console.log(data);\n                        }).catch(error => {\n                            console.log(error);\n                        });\n                        this.$router.push(\"/success\")\n                },\n                modifierEmploye(record, index) {\n                    alert(record + \"; \" + index)\n                }\n        }\n    }\n</script>\n\n<style scoped>\n    .btn {\n        background-color: grey;\n        border: none;\n        margin: 5px 0;\n    }\n</style>\n"]}]}